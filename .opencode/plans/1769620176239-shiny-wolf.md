# Plan: Configure Oracle Agent with GPT-5.2 (Matching Amp)

## Goal
Update `agent/oracle.md` to use OpenAI GPT-5.2 (matching amp's oracle config).

## Key Findings

### Amp's Oracle Config (from binary decompilation)
```javascript
oracle: {
  model: "openai/gpt-5.2",
  contextWindow: 400000,
  maxOutputTokens: 128000,
  capabilities: { reasoning: true, vision: true, tools: true }
}
```

### OpenCode Model Availability
✅ **`openai/gpt-5.2` is available** in opencode's model registry:
- 400k context, 128k output
- `reasoning: true`
- Released: 2025-12-11

### OpenCode Error Handling
- No automatic fallback if model fails
- `ModelNotFoundError` with fuzzy suggestions
- Session fails immediately (no retry for validation errors)
- Since gpt-5.2 exists, this shouldn't be an issue

## Changes to oracle.md

### Frontmatter Changes

```yaml
# Before
model: anthropic/claude-opus-4-5
options:
  thinking:
    type: enabled
    budgetTokens: 31999

# After
model: openai/gpt-5.2
options:
  reasoningEffort: high
```

### Permissions (unchanged)
Already correctly restrictive - matches amp's `allowMcp: false, allowToolbox: false`.

## File to Modify
`/Users/dmmulroy/.dotfiles/home/.config/opencode/agent/oracle.md`

## Final Configuration

```yaml
---
description: Senior engineering advisor for code reviews, architecture decisions, complex debugging, and planning. Invoke when you need deeper analysis before acting — reviews, trade-offs, debugging race conditions, planning refactors. Prompt with precise problem + files. Ask for concrete outcomes.
mode: subagent
model: openai/gpt-5.2
# GPT-5.2: 400k context, 128k output, native reasoning (matches amp oracle)
options:
  reasoningEffort: high
# Strict read-only permissions (mirrors amp's allowMcp:false, allowToolbox:false)
permission:
  "*": deny
  read: allow
  grep: allow
  glob: allow
  webfetch: allow
  lsp: allow
---
```

## Body Content
Keep existing oracle instructions unchanged - they're model-agnostic and well-written.

## Verification
1. Run `opencode` and invoke oracle via `@oracle` or Task tool
2. Confirm GPT-5.2 model used (check logs or response style)
3. Test reasoning quality on a code review task

## Rollback
If issues arise, revert to:
```yaml
model: anthropic/claude-opus-4-5
options:
  thinking:
    type: enabled
    budgetTokens: 31999
```
